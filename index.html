<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Slope - StaticQuasar931 Unblocked</title>

  <link rel="icon" href="https://res.cloudinary.com/dcsrqennd/image/upload/v1758857231/Aeries_Favicon_Real_StaticQuasar931_m1uorx.ico" />
  <link rel="stylesheet" href="style/style.css" />

  <meta name="description" content="Play Slope unblocked on StaticQuasar931. Fast, simple, and school-safe 3D reflex game. Fully working Unity loader with tips and Static branding." />

  <script src="UnityLoader.js"></script>
  <script src="tips.js"></script>

  <style>
    body,html{margin:0;padding:0;overflow:hidden;height:100%;background:#111}
    #gameContainer{width:100vw;height:100vh;}
    #sqBranding{
      position:absolute;top:35%;left:50%;transform:translate(-50%,-50%);
      text-align:center;color:#00e5ff;font-family:sans-serif;font-weight:800;
      font-size:20px;z-index:20;animation:fadeIn 1s ease;
    }
    #sqBranding span{display:block;color:#fff;font-weight:400;font-size:16px;}
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}
    #sqTip{
      position:absolute;bottom:20px;left:20px;max-width:450px;
      font-size:13px;color:#b6eaff;font-family:sans-serif;
      background:rgba(0,0,0,.4);padding:10px 14px;border-radius:8px;
      border:1px solid rgba(255,255,255,.15);
    }
    .fade-out{animation:fadeOut .4s ease forwards;}
    @keyframes fadeOut{to{opacity:0;visibility:hidden}}
  </style>

  <script>
    // Block id.net network calls (safety)
    const _rx = /id\.net\/api\/user_data/i;
    const _oldOpen = XMLHttpRequest.prototype.open;
    XMLHttpRequest.prototype.open = function(m, url){ this.__sq_block = _rx.test(url); return _oldOpen.apply(this, arguments); };
    const _oldSend = XMLHttpRequest.prototype.send;
    XMLHttpRequest.prototype.send = function(){
      if(this.__sq_block){
        console.warn("Blocked id.net call");
        this.readyState=4;this.status=200;this.responseText='{}';
        this.onload&&this.onload();this.onreadystatechange&&this.onreadystatechange();
        return;
      }
      return _oldSend.apply(this, arguments);
    };

    window.onbeforeunload = ()=>"Are you sure you want to leave? Your progress may not be saved.";

    // Tip logic
    window.addEventListener("DOMContentLoaded", ()=>{
      const tipBox=document.getElementById("sqTip");
      if(!tipBox)return;
      let arr=(window.SQ_TIPS||["Stay focused!","Avoid red blocks!","Use A/D to steer."]).slice();
      function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
      shuffle(arr);
      let i=0;
      function showTip(){tipBox.textContent=arr[i%arr.length];i++;}
      showTip();
      const interval=setInterval(showTip,8000);
      window.hideTips=()=>{clearInterval(interval);tipBox.classList.add("fade-out");};
    });

    // Unity Progress + Branding
    (function(){
      let gameInstance=null;
      function finishLoad(){
        document.getElementById("sqBranding").classList.add("fade-out");
        window.hideTips && window.hideTips();
      }

      function start(){
        const container=document.getElementById("gameContainer");
        container.style.width=window.innerWidth+"px";
        container.style.height=window.innerHeight+"px";
        gameInstance=UnityLoader.instantiate("gameContainer","slope_new.json",{
          onProgress:UnityProgress,
          Module:{
            onRuntimeInitialized:()=>{
              finishLoad();
            }
          }
        });
      }
      if(document.readyState==="complete")start();
      else window.addEventListener("load",start);
      window.addEventListener("resize",()=>{
        const c=document.getElementById("gameContainer");
        if(c){c.style.width=window.innerWidth+"px";c.style.height=window.innerHeight+"px";}
      });
    })();
  </script>
</head>
<body>
  <div id="sqBranding">
    StaticQuasar931 Presents
    <span>Loading Slope...</span>
  </div>
  <div id="sqTip">Loading tip...</div>
  <div id="gameContainer"></div>
</body>
</html>
